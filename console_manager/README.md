# Console Manager
Данный модуль позволит управлять системами сервера через консоль

## Общая структура
Навигация просиходит по интерфейсу. Интерфейс делится на:
- **Глобальный** - интерфейс, который доступен в любой "точке" менеджера
- **Локальный** - текущий интерфес, для навигации по системам

В глобальный интерфейс входят следующие команды:
- `clear` - Очистить консоль
- `use` - Переход к выбраному модулю интерфейса
- `back` - Вернуться в родительский модуль
- `interface` - Отображает текущий интерфейс
- `help` - Подробное описание о заданной функции в интерфейсе
- `status` - Информация о всех системах, статус состояния системы определяется через метод `status_system` у модуля, который должен возвращать ответ в формате `Boolean`
- `shutdown` - Отключить сервер

> При запуске всех систем автоматически вызывается метод `clear`, чтобы убрать все лишние сообщения

## Добавление команд/модулей в интерфейс
Для добавления своих модулей/команд рекомендую писать интерфейс в файле `custom_interface.js`, интерфейс из этого файла будет совмещен с интерфейсом в файле `interface.js`, который сделан для уже готовых систем

Для добавления модуля присвойте ключу значение объекта:
```javascript
const custom_interface = {
    user: {}
}
```

Для добавления команды необходимо ключу присвоить экземпляр класса `Command`:
```javascript
const custom_interface = {
    user: {
        hi: new Command('hi', 'Выведет "hi"', ({ manager }) => manager.output('info', 'HI!!!'))
    },
    ping: new Command('ping', 'pong', ({ manager }) => manager.output(null, 'PING - PONG'))
}
```

Конструктор класса `Command` принимает следующие параметры:
- Ключевую фразу
- Описание функции
- Обработчик - функция, которая будет вызываться при вызове команды пользователем
- Набор не обязательных параметров: `parameters` - массив принимаемых параметров, `flags` - массив принимаемых флагов
```javascript
new Command(
    name,
    description,
    ({ parameters, flags, manager, current_interface }) => {},
    {
        parameters: [{ name: String, description: String, required: Boolean }],
        flags: [{ name: String, description: String }]
    }
);
```

## Выполнение команд из скрипта
Вы можете выполнять все консольные команды, используя тот же интерфейс, но из скрипта:
```javascript
const { manager } = require('modules.js');
manager.exec('clear'); // Очистит консоль пользователя
```

## Файл конфигурации
Параметры:
- `hide_keys` - список ключей, которые будут скрываться при отображение через `ROOT > interface`
- `space_size` - размер отступа при использование `ROOT > interface`
- `fоrmat` - формат отображения сообщений в консоль
- `root` - название корневого модуля

## Пример использования: изучение комады `interface`
```
ROOT > help interface
interface - Отображает текущий интерфейс

Флаги: 
   -g Доступ к глобальному интерфейсу
   -f Отображение всех вложенных модулей и функций
ROOT > interface
|—— logger: Модуль
|—— api: Модуль
|—— db: Модуль
ROOT > interface -g
|—— clear - Очистить консоль
|—— use - Переход к выбраному модулю интерфейса
|—— back - Вернуться в родительский модуль
|—— interface - Отображает текущий интерфейс
|—— help - Подробное описание о заданной функции в интерфейсе
|—— status - Информация о всех системах
|—— shutdown - Отключить сервер
ROOT > interface -f
|—— logger: Модуль
|   |—— on - Включить систему логирования
|   |—— off - Отключить систему логирования
|   |—— get - Возвращает логи за указанные дату и время
|   |—— list - Список сохраненных логов
|   |—— get_format - Получить текущий шаблон для логов
|   |—— set_format - Установка нового шаблона для логов
|—— api: Модуль
|   |—— methods: Модуль
|   |   |—— test: Модуль
|   |   |   |—— on - Включить метод
|   |   |   |—— off - Отключить метод
|   |   |   |—— config - Получить настройки метода
|   |—— on - Включить систему API
|   |—— off - Отключить систему API
|   |—— get_mode - Получить текущий режим сервера
|   |—— set_mode - Установка нового режима сервера
|   |—— get_port - Получить текущий порт сервера
|   |—— set_port - Установка нового порта сервера
|—— db: Модуль
|   |—— on - Включить систему БД
|   |—— off - Отключить систему БД
|   |—— req - Запрос к базе данных
```
